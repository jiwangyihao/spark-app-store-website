import{f as y,w as O,o as b,j as m,J as z,g as w,K as g,r as E,n as L,L as p,h as R}from"./index.2d859bae.js";import{a as P,b as C,c as M}from"./scroll.db46ae81.js";function V(t,a,e){return e<=a?a:Math.min(e,Math.max(a,t))}const{passive:x}=g,j=["both","horizontal","vertical"];var k=y({name:"QScrollObserver",props:{axis:{type:String,validator:t=>j.includes(t),default:"vertical"},debounce:[String,Number],scrollTarget:{default:void 0}},emits:["scroll"],setup(t,{emit:a}){const e={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let n=null,r,c;O(()=>t.scrollTarget,()=>{o(),d()});function s(){n!==null&&n();const u=Math.max(0,C(r)),v=M(r),l={top:u-e.position.top,left:v-e.position.left};if(t.axis==="vertical"&&l.top===0||t.axis==="horizontal"&&l.left===0)return;const h=Math.abs(l.top)>=Math.abs(l.left)?l.top<0?"up":"down":l.left<0?"left":"right";e.position={top:u,left:v},e.directionChanged=e.direction!==h,e.delta=l,e.directionChanged===!0&&(e.direction=h,e.inflectionPoint=e.position),a("scroll",{...e})}function d(){r=P(c,t.scrollTarget),r.addEventListener("scroll",i,x),i(!0)}function o(){r!==void 0&&(r.removeEventListener("scroll",i,x),r=void 0)}function i(u){if(u===!0||t.debounce===0||t.debounce==="0")s();else if(n===null){const[v,l]=t.debounce?[setTimeout(s,t.debounce),clearTimeout]:[requestAnimationFrame(s),cancelAnimationFrame];n=()=>{l(v),n=null}}}const f=w();return b(()=>{c=f.proxy.$el.parentNode,d()}),m(()=>{n!==null&&n(),o()}),Object.assign(f.proxy,{trigger:i,getPosition:()=>e}),z}});function Q(){const t=E(!L.value);return t.value===!1&&b(()=>{t.value=!0}),t}const S=typeof ResizeObserver!="undefined",T=S===!0?{}:{style:"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;",url:"about:blank"};var H=y({name:"QResizeObserver",props:{debounce:{type:[String,Number],default:100}},emits:["resize"],setup(t,{emit:a}){let e=null,n,r={width:-1,height:-1};function c(o){o===!0||t.debounce===0||t.debounce==="0"?s():e===null&&(e=setTimeout(s,t.debounce))}function s(){if(clearTimeout(e),e=null,n){const{offsetWidth:o,offsetHeight:i}=n;(o!==r.width||i!==r.height)&&(r={width:o,height:i},a("resize",r))}}const d=w();if(Object.assign(d.proxy,{trigger:c}),S===!0){let o;return b(()=>{p(()=>{n=d.proxy.$el.parentNode,n&&(o=new ResizeObserver(c),o.observe(n),s())})}),m(()=>{clearTimeout(e),o!==void 0&&(o.disconnect!==void 0?o.disconnect():n&&o.unobserve(n))}),z}else{let f=function(){clearTimeout(e),i!==void 0&&(i.removeEventListener!==void 0&&i.removeEventListener("resize",c,g.passive),i=void 0)},u=function(){f(),n&&n.contentDocument&&(i=n.contentDocument.defaultView,i.addEventListener("resize",c,g.passive),s())};const o=Q();let i;return b(()=>{p(()=>{n=d.proxy.$el,n&&u()})}),m(f),()=>{if(o.value===!0)return R("object",{style:T.style,tabindex:-1,type:"text/html",data:T.url,"aria-hidden":"true",onLoad:u})}}}});export{k as Q,H as a,V as b};
