import{k as x,w as p,o as g,l as b,M as S,g as y,N as m,r as E,t as R,O as T,h as L}from"./index.8f6c09cd.js";import{a as M,b as P,c as C}from"./scroll.c700fd77.js";function V(t,c,e){return e<=c?c:Math.min(e,Math.max(c,t))}const{passive:z}=m,N=["both","horizontal","vertical"];var $=x({name:"QScrollObserver",props:{axis:{type:String,validator:t=>N.includes(t),default:"vertical"},debounce:[String,Number],scrollTarget:{default:void 0}},emits:["scroll"],setup(t,{emit:c}){const e={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let n=null,r,u;p(()=>t.scrollTarget,()=>{o(),f()});function l(){n!==null&&n();const d=Math.max(0,P(r)),v=C(r),s={top:d-e.position.top,left:v-e.position.left};if(t.axis==="vertical"&&s.top===0||t.axis==="horizontal"&&s.left===0)return;const h=Math.abs(s.top)>=Math.abs(s.left)?s.top<0?"up":"down":s.left<0?"left":"right";e.position={top:d,left:v},e.directionChanged=e.direction!==h,e.delta=s,e.directionChanged===!0&&(e.direction=h,e.inflectionPoint=e.position),c("scroll",{...e})}function f(){r=M(u,t.scrollTarget),r.addEventListener("scroll",i,z),i(!0)}function o(){r!==void 0&&(r.removeEventListener("scroll",i,z),r=void 0)}function i(d){if(d===!0||t.debounce===0||t.debounce==="0")l();else if(n===null){const[v,s]=t.debounce?[setTimeout(l,t.debounce),clearTimeout]:[requestAnimationFrame(l),cancelAnimationFrame];n=()=>{s(v),n=null}}}const{proxy:a}=y();return p(()=>a.$q.lang.rtl,l),g(()=>{u=a.$el.parentNode,f()}),b(()=>{n!==null&&n(),o()}),Object.assign(a,{trigger:i,getPosition:()=>e}),S}});function Q(){const t=E(!R.value);return t.value===!1&&g(()=>{t.value=!0}),t}const O=typeof ResizeObserver!="undefined",w=O===!0?{}:{style:"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;",url:"about:blank"};var j=x({name:"QResizeObserver",props:{debounce:{type:[String,Number],default:100}},emits:["resize"],setup(t,{emit:c}){let e=null,n,r={width:-1,height:-1};function u(o){o===!0||t.debounce===0||t.debounce==="0"?l():e===null&&(e=setTimeout(l,t.debounce))}function l(){if(e!==null&&(clearTimeout(e),e=null),n){const{offsetWidth:o,offsetHeight:i}=n;(o!==r.width||i!==r.height)&&(r={width:o,height:i},c("resize",r))}}const{proxy:f}=y();if(O===!0){let o;const i=a=>{n=f.$el.parentNode,n?(o=new ResizeObserver(u),o.observe(n),l()):a!==!0&&T(()=>{i(!0)})};return g(()=>{i()}),b(()=>{e!==null&&clearTimeout(e),o!==void 0&&(o.disconnect!==void 0?o.disconnect():n&&o.unobserve(n))}),S}else{let a=function(){e!==null&&(clearTimeout(e),e=null),i!==void 0&&(i.removeEventListener!==void 0&&i.removeEventListener("resize",u,m.passive),i=void 0)},d=function(){a(),n&&n.contentDocument&&(i=n.contentDocument.defaultView,i.addEventListener("resize",u,m.passive),l())};const o=Q();let i;return g(()=>{T(()=>{n=f.$el,n&&d()})}),b(a),f.trigger=u,()=>{if(o.value===!0)return L("object",{style:w.style,tabindex:-1,type:"text/html",data:w.url,"aria-hidden":"true",onLoad:d})}}}});export{$ as Q,j as a,V as b};
