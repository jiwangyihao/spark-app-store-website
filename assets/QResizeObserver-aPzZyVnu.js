import{k as w,w as p,o as b,l as g,aj as x,g as S,a1 as m,r as E,u as L,a2 as T,h as P}from"./index-iZyAhOW0.js";import{c as H,b as M,e as C}from"./scroll-UGxYwJNr.js";function D(t,c,e){return e<=c?c:Math.min(e,Math.max(c,t))}const{passive:y}=m,Q=["both","horizontal","vertical"],N=w({name:"QScrollObserver",props:{axis:{type:String,validator:t=>Q.includes(t),default:"vertical"},debounce:[String,Number],scrollTarget:{default:void 0}},emits:["scroll"],setup(t,{emit:c}){const e={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let i=null,r,u;p(()=>t.scrollTarget,()=>{n(),f()});function s(){i!==null&&i();const l=Math.max(0,M(r)),v=C(r),a={top:l-e.position.top,left:v-e.position.left};if(t.axis==="vertical"&&a.top===0||t.axis==="horizontal"&&a.left===0)return;const h=Math.abs(a.top)>=Math.abs(a.left)?a.top<0?"up":"down":a.left<0?"left":"right";e.position={top:l,left:v},e.directionChanged=e.direction!==h,e.delta=a,e.directionChanged===!0&&(e.direction=h,e.inflectionPoint=e.position),c("scroll",{...e})}function f(){r=H(u,t.scrollTarget),r.addEventListener("scroll",o,y),o(!0)}function n(){r!==void 0&&(r.removeEventListener("scroll",o,y),r=void 0)}function o(l){if(l===!0||t.debounce===0||t.debounce==="0")s();else if(i===null){const[v,a]=t.debounce?[setTimeout(s,t.debounce),clearTimeout]:[requestAnimationFrame(s),cancelAnimationFrame];i=()=>{a(v),i=null}}}const{proxy:d}=S();return p(()=>d.$q.lang.rtl,s),b(()=>{u=d.$el.parentNode,f()}),g(()=>{i!==null&&i(),n()}),Object.assign(d,{trigger:o,getPosition:()=>e}),x}});function R(){const t=E(!L.value);return t.value===!1&&b(()=>{t.value=!0}),{isHydrated:t}}const O=typeof ResizeObserver<"u",z=O===!0?{}:{style:"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;",url:"about:blank"},V=w({name:"QResizeObserver",props:{debounce:{type:[String,Number],default:100}},emits:["resize"],setup(t,{emit:c}){let e=null,i,r={width:-1,height:-1};function u(n){n===!0||t.debounce===0||t.debounce==="0"?s():e===null&&(e=setTimeout(s,t.debounce))}function s(){if(e!==null&&(clearTimeout(e),e=null),i){const{offsetWidth:n,offsetHeight:o}=i;(n!==r.width||o!==r.height)&&(r={width:n,height:o},c("resize",r))}}const{proxy:f}=S();if(f.trigger=u,O===!0){let n;const o=d=>{i=f.$el.parentNode,i?(n=new ResizeObserver(u),n.observe(i),s()):d!==!0&&T(()=>{o(!0)})};return b(()=>{o()}),g(()=>{e!==null&&clearTimeout(e),n!==void 0&&(n.disconnect!==void 0?n.disconnect():i&&n.unobserve(i))}),x}else{let n=function(){e!==null&&(clearTimeout(e),e=null),l!==void 0&&(l.removeEventListener!==void 0&&l.removeEventListener("resize",u,m.passive),l=void 0)},o=function(){n(),i&&i.contentDocument&&(l=i.contentDocument.defaultView,l.addEventListener("resize",u,m.passive),s())};const{isHydrated:d}=R();let l;return b(()=>{T(()=>{i=f.$el,i&&o()})}),g(n),()=>{if(d.value===!0)return P("object",{class:"q--avoid-card-border",style:z.style,tabindex:-1,type:"text/html",data:z.url,"aria-hidden":"true",onLoad:o})}}}});export{N as Q,V as a,D as b};
