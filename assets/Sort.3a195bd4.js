import{_ as q,a6 as R,r as S,b as H,q as F,s as B,F as J,x as j,A as k,u as K,a7 as Q,t as E,z as x}from"./index.8626bb02.js";import{api as D}from"./axios.fd163daf.js";import"./index.2885cb15.js";var Z=4,Y=.001,G=1e-7,X=10,I=11,b=1/(I-1),ee=typeof Float32Array=="function";function V(t,e){return 1-3*e+3*t}function W(t,e){return 3*e-6*t}function P(t){return 3*t}function O(t,e,r){return((V(e,r)*t+W(e,r))*t+P(e))*t}function U(t,e,r){return 3*V(e,r)*t*t+2*W(e,r)*t+P(e)}function te(t,e,r,a,v){var s,i,l=0;do i=e+(r-e)/2,s=O(i,a,v)-t,s>0?r=i:e=i;while(Math.abs(s)>G&&++l<X);return i}function re(t,e,r,a){for(var v=0;v<Z;++v){var s=U(e,r,a);if(s===0)return e;var i=O(e,r,a)-t;e-=i/s}return e}function ae(t){return t}var ne=function(e,r,a,v){if(!(0<=e&&e<=1&&0<=a&&a<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===r&&a===v)return ae;for(var s=ee?new Float32Array(I):new Array(I),i=0;i<I;++i)s[i]=O(i*b,e,a);function l(d){for(var o=0,_=1,z=I-1;_!==z&&s[_]<=d;++_)o+=b;--_;var L=(d-s[_])/(s[_+1]-s[_]),m=o+L*b,N=U(m,e,a);return N>=Y?re(d,m,e,a):N===0?m:te(d,o,o+b,e,a)}return function(o){return o===0?0:o===1?1:O(l(o),r,v)}};const oe=["onMousedown","onMouseup"],ie=["onTransitionend"],se=["src"],le=R(),ue={preFetch({currentRoute:t}){D.post("/type/get_type_list").then(e=>{let r;e.data.data.forEach(a=>{r=a.orig_name===t.params.sort?a.type_id:r}),r?D.post("/application/get_application_list",{size:1e4,type_id:r}).then(a=>{le.appList=a.data.data.data}):t.push("/Error404")})}},ce=Object.assign(ue,{name:"Sort",setup(t){const e=K(),r=R(),a=S(r.appList),v=S([]),s=S(r.source),i=S(e.params.sort.toString());r.$subscribe((p,u)=>{a.value=u.appList,l.value&&(v.value=z(a)),i.value=e.params.sort.toString()});const l=S(),d=S({container:!0,active:!1,animation:!1}),o=S(0);function _(){v.value=z(a)}window.addEventListener("resize",_);function z(p){let u=264,n=92,h=50,f=16,c=32,g=JSON.parse(JSON.stringify(p.value)),w=l.value.clientWidth,M=l.value.parentElement.parentElement.scrollTop/l.value.clientHeight,C;o.value!==Math.floor((w+c-f*2)/(u+c))&&(C=!0),o.value=Math.floor((w+c-f*2)/(u+c));let A=(w-(u+c)*o.value+c-f*2)/(o.value+1);return l.value.style.height=`${Math.ceil(g.length/o.value)*(n+c)+c+h*1.5}px`,C&&L(M),g.forEach((y,T)=>{y.position={left:T%o.value*(A+c+u)+f+A,top:Math.floor(T/o.value)*(n+c)+h},y.style=`transform:translate(${y.position.left}px,${y.position.top}px)`,y.class={active:!1,animation:!1}}),g}function L(p){let u;const n=l.value.parentElement.parentElement.scrollTop,h=p*l.value.clientHeight-n,f=ne(.25,.1,.25,1);function c(g){u===void 0&&(u=g);const M=(g-u)/600;l.value.parentElement.parentElement.scrollTo(0,n+h*f(Math.min(M,1))),M<1&&requestAnimationFrame(c)}requestAnimationFrame(c)}function m(p){d.value.active=!0,d.value.animation=!0,p.class.active=!0,p.class.animation=!0}function N(p){d.value.active=!1,p.class.active=!1}function $(p,u){u.propertyName==="transform"&&(d.value.animation=!1,p.class.animation=!1)}return H(()=>{r.appList=[]}),(p,u)=>(F(),B("div",{class:k(d.value),ref:n=>{l.value=n}},[(F(!0),B(J,null,j(v.value,(n,h)=>(F(),B("div",{style:Q(n.style),class:k(n.class),key:h,ref_for:!0,ref:f=>{n.el=f},onMousedown:f=>m(n),onMouseup:f=>N(n)},[E("div",{onTransitionend:f=>$(n,f)},[E("img",{src:s.value+"/store/"+i.value+"/"+n.package.replace("+","%2B")+"/icon.png",alt:""},null,8,se),E("div",null,[E("h6",null,x(n.application_name_zh),1),E("p",null,x(n.more),1)])],40,ie)],46,oe))),128))],2))}});var de=q(ce,[["__scopeId","data-v-12cfdc90"]]);export{de as default};
