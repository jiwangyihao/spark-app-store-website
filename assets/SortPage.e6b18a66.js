import{j as N,c as b,h as P,m as J,ao as mt,ap as ht,r as x,aq as pe,X as Je,a2 as gt,g as z,ag as Le,N as ve,ae as De,w as M,o as K,k as le,aj as pt,M as Be,ar as bt,as as fe,a as yt,at as wt,au as Et,av as _t,aw as xt,a0 as Ye,ax as Ze,ac as Ce,ai as St,ay as qt,az as kt,aA as Xe,Q as Bt,J as Ee,aB as Tt,ah as Ct,ab as Pt,i as $t,aC as Ht,aD as Mt,_ as At,v as Lt,aE as Dt,a7 as Ie,y as j,z as ee,A as B,aa as ue,E as F,F as We,C as Fe,d as se,B as te,G as _e,aF as xe,ak as It,D as Wt,Y as Ft}from"./index.a6cf12b2.js";import{u as Pe,a as $e}from"./use-dark.4120066c.js";import{c as zt}from"./selection.16a28c70.js";import{g as Vt,a as Rt}from"./scroll.51937aba.js";import{api as Se}from"./api.2d5e4abc.js";var Ot=N({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(e,{slots:t}){const n=b(()=>parseInt(e.lines,10)),a=b(()=>"q-item__label"+(e.overline===!0?" q-item__label--overline text-overline":"")+(e.caption===!0?" q-item__label--caption text-caption":"")+(e.header===!0?" q-item__label--header":"")+(n.value===1?" ellipsis":"")),o=b(()=>e.lines!==void 0&&n.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":n.value}:null);return()=>P("div",{style:o.value,class:a.value},J(t.default))}}),Nt=N({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(e,{slots:t}){const n=b(()=>`q-item__section column q-item__section--${e.avatar===!0||e.side===!0||e.thumbnail===!0?"side":"main"}`+(e.top===!0?" q-item__section--top justify-start":" justify-center")+(e.avatar===!0?" q-item__section--avatar":"")+(e.thumbnail===!0?" q-item__section--thumbnail":"")+(e.noWrap===!0?" q-item__section--nowrap":""));return()=>P("div",{class:n.value},J(t.default))}}),Qt=N({name:"QItem",props:{...Pe,...mt,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(e,{slots:t,emit:n}){const{proxy:{$q:a}}=z(),o=$e(e,a),{hasLink:i,linkAttrs:l,linkClass:c,linkTag:m,navigateOnClick:f}=ht(),s=x(null),w=x(null),_=b(()=>e.clickable===!0||i.value===!0||e.tag==="label"),r=b(()=>e.disable!==!0&&_.value===!0),u=b(()=>"q-item q-item-type row no-wrap"+(e.dense===!0?" q-item--dense":"")+(o.value===!0?" q-item--dark":"")+(i.value===!0&&e.active===null?c.value:e.active===!0?` q-item--active${e.activeClass!==void 0?` ${e.activeClass}`:""}`:"")+(e.disable===!0?" disabled":"")+(r.value===!0?" q-item--clickable q-link cursor-pointer "+(e.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(e.focused===!0?" q-manual-focusable--focused":""):"")),T=b(()=>{if(e.insetLevel===void 0)return null;const v=a.lang.rtl===!0?"Right":"Left";return{["padding"+v]:16+e.insetLevel*56+"px"}});function $(v){r.value===!0&&(w.value!==null&&(v.qKeyEvent!==!0&&document.activeElement===s.value?w.value.focus():document.activeElement===w.value&&s.value.focus()),f(v))}function q(v){if(r.value===!0&&pe(v,13)===!0){Je(v),v.qKeyEvent=!0;const d=new MouseEvent("click",v);d.qKeyEvent=!0,s.value.dispatchEvent(d)}n("keyup",v)}function g(){const v=gt(t.default,[]);return r.value===!0&&v.unshift(P("div",{class:"q-focus-helper",tabindex:-1,ref:w})),v}return()=>{const v={ref:s,class:u.value,style:T.value,role:"listitem",onClick:$,onKeyup:q};return r.value===!0?(v.tabindex=e.tabindex||"0",Object.assign(v,l.value)):_.value===!0&&(v["aria-disabled"]="true"),P(m.value,v,g())}}}),jt=N({name:"QList",props:{...Pe,bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean,tag:{type:String,default:"div"}},setup(e,{slots:t}){const n=z(),a=$e(e,n.proxy.$q),o=b(()=>"q-list"+(e.bordered===!0?" q-list--bordered":"")+(e.dense===!0?" q-list--dense":"")+(e.separator===!0?" q-list--separator":"")+(a.value===!0?" q-list--dark":"")+(e.padding===!0?" q-list--padding":""));return()=>P(e.tag,{class:o.value},J(t.default))}}),Kt=N({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:t}){const n=b(()=>{const a=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(o=>e[o]===!0).map(o=>`q-btn-group--${o}`).join(" ");return`q-btn-group row no-wrap${a.length!==0?" "+a:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>P("div",{class:n.value},J(t.default))}});const Ut={target:{default:!0},noParentEvent:Boolean,contextMenu:Boolean};function Gt({showing:e,avoidEmit:t,configureAnchorEl:n}){const{props:a,proxy:o,emit:i}=z(),l=x(null);let c=null;function m(r){return l.value===null?!1:r===void 0||r.touches===void 0||r.touches.length<=1}const f={};n===void 0&&(Object.assign(f,{hide(r){o.hide(r)},toggle(r){o.toggle(r),r.qAnchorHandled=!0},toggleKey(r){pe(r,13)===!0&&f.toggle(r)},contextClick(r){o.hide(r),Le(r),ve(()=>{o.show(r),r.qAnchorHandled=!0})},prevent:Le,mobileTouch(r){if(f.mobileCleanup(r),m(r)!==!0)return;o.hide(r),l.value.classList.add("non-selectable");const u=r.target;De(f,"anchor",[[u,"touchmove","mobileCleanup","passive"],[u,"touchend","mobileCleanup","passive"],[u,"touchcancel","mobileCleanup","passive"],[l.value,"contextmenu","prevent","notPassive"]]),c=setTimeout(()=>{c=null,o.show(r),r.qAnchorHandled=!0},300)},mobileCleanup(r){l.value.classList.remove("non-selectable"),c!==null&&(clearTimeout(c),c=null),e.value===!0&&r!==void 0&&zt()}}),n=function(r=a.contextMenu){if(a.noParentEvent===!0||l.value===null)return;let u;r===!0?o.$q.platform.is.mobile===!0?u=[[l.value,"touchstart","mobileTouch","passive"]]:u=[[l.value,"mousedown","hide","passive"],[l.value,"contextmenu","contextClick","notPassive"]]:u=[[l.value,"click","toggle","passive"],[l.value,"keyup","toggleKey","passive"]],De(f,"anchor",u)});function s(){pt(f,"anchor")}function w(r){for(l.value=r;l.value.classList.contains("q-anchor--skip");)l.value=l.value.parentNode;n()}function _(){if(a.target===!1||a.target===""||o.$el.parentNode===null)l.value=null;else if(a.target===!0)w(o.$el.parentNode);else{let r=a.target;if(typeof a.target=="string")try{r=document.querySelector(a.target)}catch{r=void 0}r!=null?(l.value=r.$el||r,n()):(l.value=null,console.error(`Anchor: target "${a.target}" not found`))}}return M(()=>a.contextMenu,r=>{l.value!==null&&(s(),n(r))}),M(()=>a.target,()=>{l.value!==null&&s(),_()}),M(()=>a.noParentEvent,r=>{l.value!==null&&(r===!0?s():n())}),K(()=>{_(),t!==!0&&a.modelValue===!0&&l.value===null&&i("update:modelValue",!1)}),le(()=>{c!==null&&clearTimeout(c),s()}),{anchorEl:l,canShow:m,anchorEvents:f}}function Jt(e,t){const n=x(null);let a;function o(c,m){const f=`${m!==void 0?"add":"remove"}EventListener`,s=m!==void 0?m:a;c!==window&&c[f]("scroll",s,Be.passive),window[f]("scroll",s,Be.passive),a=m}function i(){n.value!==null&&(o(n.value),n.value=null)}const l=M(()=>e.noParentEvent,()=>{n.value!==null&&(i(),t())});return le(l),{localScrollTarget:n,unconfigureScrollTarget:i,changeScrollEvent:o}}const Yt={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},Zt=["beforeShow","show","beforeHide","hide"];function Xt({showing:e,canShow:t,hideOnRouteChange:n,handleShow:a,handleHide:o,processOnMount:i}){const l=z(),{props:c,emit:m,proxy:f}=l;let s;function w(g){e.value===!0?u(g):_(g)}function _(g){if(c.disable===!0||g!==void 0&&g.qAnchorHandled===!0||t!==void 0&&t(g)!==!0)return;const v=c["onUpdate:modelValue"]!==void 0;v===!0&&(m("update:modelValue",!0),s=g,ve(()=>{s===g&&(s=void 0)})),(c.modelValue===null||v===!1)&&r(g)}function r(g){e.value!==!0&&(e.value=!0,m("beforeShow",g),a!==void 0?a(g):m("show",g))}function u(g){if(c.disable===!0)return;const v=c["onUpdate:modelValue"]!==void 0;v===!0&&(m("update:modelValue",!1),s=g,ve(()=>{s===g&&(s=void 0)})),(c.modelValue===null||v===!1)&&T(g)}function T(g){e.value!==!1&&(e.value=!1,m("beforeHide",g),o!==void 0?o(g):m("hide",g))}function $(g){c.disable===!0&&g===!0?c["onUpdate:modelValue"]!==void 0&&m("update:modelValue",!1):g===!0!==e.value&&(g===!0?r:T)(s)}M(()=>c.modelValue,$),n!==void 0&&bt(l)===!0&&M(()=>f.$route.fullPath,()=>{n.value===!0&&e.value===!0&&u()}),i===!0&&K(()=>{$(c.modelValue)});const q={show:_,hide:u,toggle:w};return Object.assign(f,q),q}let ne=[],oe=[];function et(e){oe=oe.filter(t=>t!==e)}function en(e){et(e),oe.push(e)}function ze(e){et(e),oe.length===0&&ne.length!==0&&(ne[ne.length-1](),ne=[])}function tn(e){oe.length===0?e():ne.push(e)}const U=[];function nn(e){return U.find(t=>t.contentEl!==null&&t.contentEl.contains(e))}function tt(e,t){do{if(e.$options.name==="QMenu"){if(e.hide(t),e.$props.separateClosePopup===!0)return fe(e)}else if(e.__qPortal===!0){const n=fe(e);return n!==void 0&&n.$options.name==="QPopupProxy"?(e.hide(t),n):e}e=fe(e)}while(e!=null)}function an(e,t,n){for(;n!==0&&e!==void 0&&e!==null;){if(e.__qPortal===!0){if(n--,e.$options.name==="QMenu"){e=tt(e,t);continue}e.hide(t)}e=fe(e)}}function on(e){for(e=e.parent;e!=null;){if(e.type.name==="QGlobalDialog")return!0;if(e.type.name==="QDialog"||e.type.name==="QMenu")return!1;e=e.parent}return!1}function ln(e,t,n,a){const o=x(!1),i=x(!1);let l=null;const c={},m=a==="dialog"&&on(e);function f(w){if(w===!0){ze(c),i.value=!0;return}i.value=!1,o.value===!1&&(m===!1&&l===null&&(l=_t(!1,a)),o.value=!0,U.push(e.proxy),en(c))}function s(w){if(i.value=!1,w!==!0)return;ze(c),o.value=!1;const _=U.indexOf(e.proxy);_!==-1&&U.splice(_,1),l!==null&&(xt(l),l=null)}return yt(()=>{s(!0)}),e.proxy.__qPortal=!0,wt(e.proxy,"contentEl",()=>t.value),{showPortal:f,hidePortal:s,portalIsActive:o,portalIsAccessible:i,renderPortal:()=>m===!0?n():o.value===!0?[P(Et,{to:l},n())]:void 0}}const nt={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function rn(e,t=()=>{},n=()=>{}){return{transitionProps:b(()=>{const a=`q-transition--${e.transitionShow||t()}`,o=`q-transition--${e.transitionHide||n()}`;return{appear:!0,enterFromClass:`${a}-enter-from`,enterActiveClass:`${a}-enter-active`,enterToClass:`${a}-enter-to`,leaveFromClass:`${o}-leave-from`,leaveActiveClass:`${o}-leave-active`,leaveToClass:`${o}-leave-to`}}),transitionStyle:b(()=>`--q-transition-duration: ${e.transitionDuration}ms`)}}function un(){let e;const t=z();function n(){e=void 0}return Ye(n),le(n),{removeTick:n,registerTick(a){e=a,ve(()=>{e===a&&(Ze(t)===!1&&e(),e=void 0)})}}}function sn(){let e=null;const t=z();function n(){e!==null&&(clearTimeout(e),e=null)}return Ye(n),le(n),{removeTimeout:n,registerTimeout(a,o){n(),Ze(t)===!1&&(e=setTimeout(a,o))}}}const V=[];let G;function cn(e){G=e.keyCode===27}function dn(){G===!0&&(G=!1)}function fn(e){G===!0&&(G=!1,pe(e,27)===!0&&V[V.length-1](e))}function at(e){window[e]("keydown",cn),window[e]("blur",dn),window[e]("keyup",fn),G=!1}function vn(e){Ce.is.desktop===!0&&(V.push(e),V.length===1&&at("addEventListener"))}function Ve(e){const t=V.indexOf(e);t>-1&&(V.splice(t,1),V.length===0&&at("removeEventListener"))}const R=[];function ot(e){R[R.length-1](e)}function mn(e){Ce.is.desktop===!0&&(R.push(e),R.length===1&&document.body.addEventListener("focusin",ot))}function hn(e){const t=R.indexOf(e);t>-1&&(R.splice(t,1),R.length===0&&document.body.removeEventListener("focusin",ot))}const{notPassiveCapture:me}=Be,O=[];function he(e){const t=e.target;if(t===void 0||t.nodeType===8||t.classList.contains("no-pointer-events")===!0)return;let n=U.length-1;for(;n>=0;){const a=U[n].$;if(a.type.name==="QTooltip"){n--;continue}if(a.type.name!=="QDialog")break;if(a.props.seamless!==!0)return;n--}for(let a=O.length-1;a>=0;a--){const o=O[a];if((o.anchorEl.value===null||o.anchorEl.value.contains(t)===!1)&&(t===document.body||o.innerRef.value!==null&&o.innerRef.value.contains(t)===!1))e.qClickOutside=!0,o.onClickOutside(e);else return}}function gn(e){O.push(e),O.length===1&&(document.addEventListener("mousedown",he,me),document.addEventListener("touchstart",he,me))}function Re(e){const t=O.findIndex(n=>n===e);t>-1&&(O.splice(t,1),O.length===0&&(document.removeEventListener("mousedown",he,me),document.removeEventListener("touchstart",he,me)))}let Oe,Ne;function Qe(e){const t=e.split(" ");return t.length!==2?!1:["top","center","bottom"].includes(t[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(t[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function pn(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const Te={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{Te[`${e}#ltr`]=e,Te[`${e}#rtl`]=e});function je(e,t){const n=e.split(" ");return{vertical:n[0],horizontal:Te[`${n[1]}#${t===!0?"rtl":"ltr"}`]}}function bn(e,t){let{top:n,left:a,right:o,bottom:i,width:l,height:c}=e.getBoundingClientRect();return t!==void 0&&(n-=t[1],a-=t[0],i+=t[1],o+=t[0],l+=t[0],c+=t[1]),{top:n,bottom:i,height:c,left:a,right:o,width:l,middle:a+(o-a)/2,center:n+(i-n)/2}}function yn(e,t,n){let{top:a,left:o}=e.getBoundingClientRect();return a+=t.top,o+=t.left,n!==void 0&&(a+=n[1],o+=n[0]),{top:a,bottom:a+1,height:1,left:o,right:o+1,width:1,middle:o,center:a}}function wn(e,t){return{top:0,center:t/2,bottom:t,left:0,middle:e/2,right:e}}function Ke(e,t,n,a){return{top:e[n.vertical]-t[a.vertical],left:e[n.horizontal]-t[a.horizontal]}}function lt(e,t=0){if(e.targetEl===null||e.anchorEl===null||t>5)return;if(e.targetEl.offsetHeight===0||e.targetEl.offsetWidth===0){setTimeout(()=>{lt(e,t+1)},10);return}const{targetEl:n,offset:a,anchorEl:o,anchorOrigin:i,selfOrigin:l,absoluteOffset:c,fit:m,cover:f,maxHeight:s,maxWidth:w}=e;if(Ce.is.ios===!0&&window.visualViewport!==void 0){const W=document.body.style,{offsetLeft:H,offsetTop:A}=window.visualViewport;H!==Oe&&(W.setProperty("--q-pe-left",H+"px"),Oe=H),A!==Ne&&(W.setProperty("--q-pe-top",A+"px"),Ne=A)}const{scrollLeft:_,scrollTop:r}=n,u=c===void 0?bn(o,f===!0?[0,0]:a):yn(o,c,a);Object.assign(n.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:w||"100vw",maxHeight:s||"100vh",visibility:"visible"});const{offsetWidth:T,offsetHeight:$}=n,{elWidth:q,elHeight:g}=m===!0||f===!0?{elWidth:Math.max(u.width,T),elHeight:f===!0?Math.max(u.height,$):$}:{elWidth:T,elHeight:$};let v={maxWidth:w,maxHeight:s};(m===!0||f===!0)&&(v.minWidth=u.width+"px",f===!0&&(v.minHeight=u.height+"px")),Object.assign(n.style,v);const d=wn(q,g);let S=Ke(u,d,i,l);if(c===void 0||a===void 0)qe(S,u,d,i,l);else{const{top:W,left:H}=S;qe(S,u,d,i,l);let A=!1;if(S.top!==W){A=!0;const D=2*a[1];u.center=u.top-=D,u.bottom-=D+2}if(S.left!==H){A=!0;const D=2*a[0];u.middle=u.left-=D,u.right-=D+2}A===!0&&(S=Ke(u,d,i,l),qe(S,u,d,i,l))}v={top:S.top+"px",left:S.left+"px"},S.maxHeight!==void 0&&(v.maxHeight=S.maxHeight+"px",u.height>S.maxHeight&&(v.minHeight=v.maxHeight)),S.maxWidth!==void 0&&(v.maxWidth=S.maxWidth+"px",u.width>S.maxWidth&&(v.minWidth=v.maxWidth)),Object.assign(n.style,v),n.scrollTop!==r&&(n.scrollTop=r),n.scrollLeft!==_&&(n.scrollLeft=_)}function qe(e,t,n,a,o){const i=n.bottom,l=n.right,c=Vt(),m=window.innerHeight-c,f=document.body.clientWidth;if(e.top<0||e.top+i>m)if(o.vertical==="center")e.top=t[a.vertical]>m/2?Math.max(0,m-i):0,e.maxHeight=Math.min(i,m);else if(t[a.vertical]>m/2){const s=Math.min(m,a.vertical==="center"?t.center:a.vertical===o.vertical?t.bottom:t.top);e.maxHeight=Math.min(i,s),e.top=Math.max(0,s-i)}else e.top=Math.max(0,a.vertical==="center"?t.center:a.vertical===o.vertical?t.top:t.bottom),e.maxHeight=Math.min(i,m-e.top);if(e.left<0||e.left+l>f)if(e.maxWidth=Math.min(l,f),o.horizontal==="middle")e.left=t[a.horizontal]>f/2?Math.max(0,f-l):0;else if(t[a.horizontal]>f/2){const s=Math.min(f,a.horizontal==="middle"?t.middle:a.horizontal===o.horizontal?t.right:t.left);e.maxWidth=Math.min(l,s),e.left=Math.max(0,s-e.maxWidth)}else e.left=Math.max(0,a.horizontal==="middle"?t.middle:a.horizontal===o.horizontal?t.left:t.right),e.maxWidth=Math.min(l,f-e.left)}var En=N({name:"QMenu",inheritAttrs:!1,props:{...Ut,...Yt,...Pe,...nt,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:Qe},self:{type:String,validator:Qe},offset:{type:Array,validator:pn},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...Zt,"click","escapeKey"],setup(e,{slots:t,emit:n,attrs:a}){let o=null,i,l,c;const m=z(),{proxy:f}=m,{$q:s}=f,w=x(null),_=x(!1),r=b(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),u=$e(e,s),{registerTick:T,removeTick:$}=un(),{registerTimeout:q}=sn(),{transitionProps:g,transitionStyle:v}=rn(e),{localScrollTarget:d,changeScrollEvent:S,unconfigureScrollTarget:W}=Jt(e,Me),{anchorEl:H,canShow:A}=Gt({showing:_}),{hide:D}=Xt({showing:_,canShow:A,handleShow:re,handleHide:He,hideOnRouteChange:r,processOnMount:!0}),{showPortal:k,hidePortal:ie,renderPortal:be}=ln(m,w,dt,"menu"),Y={anchorEl:H,innerRef:w,onClickOutside(p){if(e.persistent!==!0&&_.value===!0)return D(p),(p.type==="touchstart"||p.target.classList.contains("q-dialog__backdrop"))&&Je(p),!0}},E=b(()=>je(e.anchor||(e.cover===!0?"center middle":"bottom start"),s.lang.rtl)),y=b(()=>e.cover===!0?E.value:je(e.self||"top start",s.lang.rtl)),h=b(()=>(e.square===!0?" q-menu--square":"")+(u.value===!0?" q-menu--dark q-dark":"")),L=b(()=>e.autoClose===!0?{onClick:ct}:{}),I=b(()=>_.value===!0&&e.persistent!==!0);M(I,p=>{p===!0?(vn(ye),gn(Y)):(Ve(ye),Re(Y))});function Q(){tn(()=>{let p=w.value;p&&p.contains(document.activeElement)!==!0&&(p=p.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||p.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||p.querySelector("[autofocus], [data-autofocus]")||p,p.focus({preventScroll:!0}))})}function re(p){if(o=e.noRefocus===!1?document.activeElement:null,mn(Ae),k(),Me(),i=void 0,p!==void 0&&(e.touchPosition||e.contextMenu)){const we=St(p);if(we.left!==void 0){const{top:ft,left:vt}=H.value.getBoundingClientRect();i={left:we.left-vt,top:we.top-ft}}}l===void 0&&(l=M(()=>s.screen.width+"|"+s.screen.height+"|"+e.self+"|"+e.anchor+"|"+s.lang.rtl,X)),e.noFocus!==!0&&document.activeElement.blur(),T(()=>{X(),e.noFocus!==!0&&Q()}),q(()=>{s.platform.is.ios===!0&&(c=e.autoClose,w.value.click()),X(),k(!0),n("show",p)},e.transitionDuration)}function He(p){$(),ie(),Z(!0),o!==null&&(p===void 0||p.qClickOutside!==!0)&&(((p&&p.type.indexOf("key")===0?o.closest('[tabindex]:not([tabindex^="-"])'):void 0)||o).focus(),o=null),q(()=>{ie(!0),n("hide",p)},e.transitionDuration)}function Z(p){i=void 0,l!==void 0&&(l(),l=void 0),(p===!0||_.value===!0)&&(hn(Ae),W(),Re(Y),Ve(ye)),p!==!0&&(o=null)}function Me(){(H.value!==null||e.scrollTarget!==void 0)&&(d.value=Rt(H.value,e.scrollTarget),S(d.value,X))}function ct(p){c!==!0?(tt(f,p),n("click",p)):c=!1}function Ae(p){I.value===!0&&e.noFocus!==!0&&kt(w.value,p.target)!==!0&&Q()}function ye(p){n("escapeKey"),D(p)}function X(){lt({targetEl:w.value,offset:e.offset,anchorEl:H.value,anchorOrigin:E.value,selfOrigin:y.value,absoluteOffset:i,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function dt(){return P(qt,g.value,()=>_.value===!0?P("div",{role:"menu",...a,ref:w,tabindex:-1,class:["q-menu q-position-engine scroll"+h.value,a.class],style:[a.style,v.value],...L.value},J(t.default)):null)}return le(Z),Object.assign(f,{focus:Q,updatePosition:X}),be}});let ke,ce=0;const C=new Array(256);for(let e=0;e<256;e++)C[e]=(e+256).toString(16).substring(1);const _n=(()=>{const e=typeof crypto!="undefined"?crypto:typeof window!="undefined"?window.crypto||window.msCrypto:void 0;if(e!==void 0){if(e.randomBytes!==void 0)return e.randomBytes;if(e.getRandomValues!==void 0)return t=>{const n=new Uint8Array(t);return e.getRandomValues(n),n}}return t=>{const n=[];for(let a=t;a>0;a--)n.push(Math.floor(Math.random()*256));return n}})(),Ue=4096;function xn(){(ke===void 0||ce+16>Ue)&&(ce=0,ke=_n(Ue));const e=Array.prototype.slice.call(ke,ce,ce+=16);return e[6]=e[6]&15|64,e[8]=e[8]&63|128,C[e[0]]+C[e[1]]+C[e[2]]+C[e[3]]+"-"+C[e[4]]+C[e[5]]+"-"+C[e[6]]+C[e[7]]+"-"+C[e[8]]+C[e[9]]+"-"+C[e[10]]+C[e[11]]+C[e[12]]+C[e[13]]+C[e[14]]+C[e[15]]}const Sn=Object.keys(Xe),qn=e=>Sn.reduce((t,n)=>{const a=e[n];return a!==void 0&&(t[n]=a),t},{});var kn=N({name:"QBtnDropdown",props:{...Xe,...nt,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(e,{slots:t,emit:n}){const{proxy:a}=z(),o=x(e.modelValue),i=x(null),l=xn(),c=b(()=>{const d={"aria-expanded":o.value===!0?"true":"false","aria-haspopup":"true","aria-controls":l,"aria-label":e.toggleAriaLabel||a.$q.lang.label[o.value===!0?"collapse":"expand"](e.label)};return(e.disable===!0||e.split===!1&&e.disableMainBtn===!0||e.disableDropdown===!0)&&(d["aria-disabled"]="true"),d}),m=b(()=>"q-btn-dropdown__arrow"+(o.value===!0&&e.noIconAnimation===!1?" rotate-180":"")+(e.split===!1?" q-btn-dropdown__arrow-container":"")),f=b(()=>Tt(e)),s=b(()=>qn(e));M(()=>e.modelValue,d=>{i.value!==null&&i.value[d?"show":"hide"]()}),M(()=>e.split,v);function w(d){o.value=!0,n("beforeShow",d)}function _(d){n("show",d),n("update:modelValue",!0)}function r(d){o.value=!1,n("beforeHide",d)}function u(d){n("hide",d),n("update:modelValue",!1)}function T(d){n("click",d)}function $(d){Ct(d),v(),n("click",d)}function q(d){i.value!==null&&i.value.toggle(d)}function g(d){i.value!==null&&i.value.show(d)}function v(d){i.value!==null&&i.value.hide(d)}return Object.assign(a,{show:g,hide:v,toggle:q}),K(()=>{e.modelValue===!0&&g()}),()=>{const d=[P(Bt,{class:m.value,name:e.dropdownIcon||a.$q.iconSet.arrow.dropdown})];return e.disableDropdown!==!0&&d.push(P(En,{ref:i,id:l,class:e.contentClass,style:e.contentStyle,cover:e.cover,fit:!0,persistent:e.persistent,noRouteDismiss:e.noRouteDismiss,autoClose:e.autoClose,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,separateClosePopup:!0,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:w,onShow:_,onBeforeHide:r,onHide:u},t.default)),e.split===!1?P(Ee,{class:"q-btn-dropdown q-btn-dropdown--simple",...s.value,...c.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:T},{default:()=>J(t.label,[]).concat(d),loading:t.loading}):P(Kt,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:e.rounded,square:e.square,...f.value,glossy:e.glossy,stretch:e.stretch},()=>[P(Ee,{class:"q-btn-dropdown--current",...s.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:$},{default:t.label,loading:t.loading}),P(Ee,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...c.value,...f.value,disable:e.disable===!0||e.disableDropdown===!0,rounded:e.rounded,color:e.color,textColor:e.textColor,dense:e.dense,size:e.size,padding:e.padding,ripple:e.ripple},()=>d)])}}});function Ge(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const t=parseInt(e,10);return isNaN(t)?0:t}var Bn=Pt({name:"close-popup",beforeMount(e,{value:t}){const n={depth:Ge(t),handler(a){n.depth!==0&&setTimeout(()=>{const o=nn(e);o!==void 0&&an(o,a,n.depth)})},handlerKey(a){pe(a,13)===!0&&n.handler(a)}};e.__qclosepopup=n,e.addEventListener("click",n.handler),e.addEventListener("keyup",n.handlerKey)},updated(e,{value:t,oldValue:n}){t!==n&&(e.__qclosepopup.depth=Ge(t))},beforeUnmount(e){const t=e.__qclosepopup;e.removeEventListener("click",t.handler),e.removeEventListener("keyup",t.handlerKey),delete e.__qclosepopup}}),Tn="/spark-store-qe/assets/application.bc4a430e.svg";function Cn(){return $t(Ht)}const Pn=Mt("store",{state:()=>({appList:{},source:"https://d.store.deepinos.org.cn",debSource:"https://mirrors.sdu.edu.cn/spark-store-repository/"}),getters:{},actions:{}});var $n=4,Hn=.001,Mn=1e-7,An=10,ae=11,de=1/(ae-1),Ln=typeof Float32Array=="function";function it(e,t){return 1-3*t+3*e}function rt(e,t){return 3*t-6*e}function ut(e){return 3*e}function ge(e,t,n){return((it(t,n)*e+rt(t,n))*e+ut(t))*e}function st(e,t,n){return 3*it(t,n)*e*e+2*rt(t,n)*e+ut(t)}function Dn(e,t,n,a,o){var i,l,c=0;do l=t+(n-t)/2,i=ge(l,a,o)-e,i>0?n=l:t=l;while(Math.abs(i)>Mn&&++c<An);return l}function In(e,t,n,a){for(var o=0;o<$n;++o){var i=st(t,n,a);if(i===0)return t;var l=ge(t,n,a)-e;t-=l/i}return t}function Wn(e){return e}var Fn=function(t,n,a,o){if(!(0<=t&&t<=1&&0<=a&&a<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===n&&a===o)return Wn;for(var i=Ln?new Float32Array(ae):new Array(ae),l=0;l<ae;++l)i[l]=ge(l*de,t,a);function c(m){for(var f=0,s=1,w=ae-1;s!==w&&i[s]<=m;++s)f+=de;--s;var _=(m-i[s])/(i[s+1]-i[s]),r=f+_*de,u=st(r,t,a);return u>=Hn?In(m,r,t,a):u===0?r:Dn(m,f,f+de,t,a)}return function(f){return f===0?0:f===1?1:ge(c(f),n,o)}};const zn=["src"],Vn={class:"description"},Rn={class:"detail"},On={class:"name"},Nn={class:"version"},Qn={class:"tags"},jn={class:"description"},Kn=["onMousedown","onMouseup"],Un=["onTransitionend"],Gn=["src","onError"],Jn={class:"description"},Yn={__name:"SortPage",setup(e){const t=Cn(),n=x(null),a=x({}),o=x({active:!1,animation:!1}),i=x({active:!1,animation:!1,loaded:!1,open:!1}),l=x({position:{left:0,top:0},class:{}}),c=Lt(),m=Dt(),f=Pn(),s=x([]),w=x(f.source),_=x(f.debSource),r=x(c.params.sort.toString());K(()=>{M(()=>c.params.sort,()=>{if(c.params.sort){async function E(){const y=await Se.getTypeList();let h;y.forEach(L=>{h=L.orig_name===c.params.sort?L.type_id:h}),h?(s.value=v(await Se.getApplicationList(h)),r.value=c.params.sort.toString(),cancelAnimationFrame(d.value.animationId),S(n.value.parentElement.parentElement.scrollTop,0)):await m.push("/Error404")}i.value.active?(i.value.active=!1,i.value.open=!1,i.value.loaded=!1,o.value.cover=!1,i.value.animation=!0,setTimeout(E,2e3)):E().catch(y=>{t.notify({type:"negative",message:y.toString()})})}},{immediate:!0})});const u={cardWidth:264,cardHeight:92,verticalPadding:50,horizonPadding:16,gap:32},T=x(0),$=b(()=>`${Math.ceil(s.value.length/q.value)*(u.cardHeight+u.gap)+u.gap+u.verticalPadding*1.5}px`),q=b(()=>Math.floor((T.value+u.gap-u.horizonPadding*2)/(u.cardWidth+u.gap))),g=b(()=>(T.value-(u.cardWidth+u.gap)*q.value+u.gap-u.horizonPadding*2)/(q.value+1));function v(E){E.forEach((h,L)=>{h.position={left:b(()=>L%q.value*(g.value+u.gap+u.cardWidth)+u.horizonPadding+g.value),top:b(()=>Math.floor(L/q.value)*(u.cardHeight+u.gap)+u.verticalPadding)},h.style=b(()=>`transform:translate(${h.position.left.value}px,${h.position.top.value}px)`),h.hasOwnProperty("class")||(h.class={active:!1,animation:!1,appCard:!0,cover:!1}),h.imgError=x(!1),h.imgSrc=b(()=>h.imgError.value?Tn:`${w.value}/store/${r.value}/${h.package.replace("+","%2B")}/icon.png`)});const y=x(n.value.parentElement.parentElement.scrollTop);return a.value.style=b(()=>`--j-left:${l.value.position.left-T.value/2}px;--j-top:${l.value.position.top-n.value.parentElement.parentElement.clientHeight/2-y.value}px;`),n.value.parentElement.parentElement.addEventListener("scroll",Ie(()=>{d.value.animationId||(y.value=n.value.parentElement.parentElement.scrollTop)},250)),E}K(()=>{T.value=n.value.clientWidth,window.addEventListener("resize",Ie(()=>{T.value=n.value.clientWidth},250))});const d=x({originTop:0,targetTop:0,animationId:0});function S(E,y){let h;const L=y-E,I=Fn(.25,.1,.25,1);function Q(re){h===void 0&&(h=re);const Z=(re-h)/600;n.value.parentElement.parentElement.scrollTo(0,E+L*I(Math.min(Z,1))),Z<1?d.value.animationId=requestAnimationFrame(Q):(d.value.targetTop=0,d.value.animationId=0)}d.value.animationId=requestAnimationFrame(Q)}K(()=>{M(q,(E,y)=>{cancelAnimationFrame(d.value.animationId);const h=d.value.targetTop?d.value.targetTop:n.value.parentElement.parentElement.scrollTop;d.value.targetTop=(h-u.verticalPadding+n.value.parentElement.parentElement.clientHeight/2)*y/E-n.value.parentElement.parentElement.clientHeight/2+u.verticalPadding,S(n.value.parentElement.parentElement.scrollTop,d.value.targetTop)})});function W(E){o.value.active=!0,o.value.animation=!0,l.value.class.cover=!1,E.class.active=!0,E.class.animation=!0,l.value=E,Y(E.application_id)}function H(E){o.value.active=!1,E.class.active=!1,E.class.cover=!0,i.value.active=!0,o.value.cover=!0}function A(E,y){y.propertyName==="transform"&&(o.value.animation=!1,E.class.animation=!1)}function D(E){E.propertyName==="transform"&&(i.value.animation=!1,l.value.class.cover=i.value.active,i.value.open=i.value.active)}const k=x({}),ie=b(()=>`${_.value}/store/${k.value.orig_name}/${k.value.package}/${k.value.package}_${k.value.version}_${k.value.arch}.deb`),be=b(()=>`${w.value}/store/${k.value.orig_name}/${k.value.package}/${k.value.package}_${k.value.version}_${k.value.arch}.deb.torrent`);function Y(E){Se.getApplicationDetail(E).then(y=>{k.value=y,i.value.loaded=!0}).catch(y=>{t.notify({type:"negative",message:y.toString()})})}return(E,y)=>(j(),ee("div",{class:_e(["container",o.value]),style:xe({height:$.value}),ref_key:"container",ref:n},[B("div",{class:_e(["coverView",i.value]),onClick:y[5]||(y[5]=h=>{i.value.active=!1,i.value.open=!1,i.value.loaded=!1,o.value.cover=!1,i.value.animation=!0}),style:xe(a.value.style)},[B("div",{class:"card",onTransitionend:D,onClick:y[4]||(y[4]=ue(()=>{},["stop"]))},[B("div",{class:"cardView",onTransitionend:y[2]||(y[2]=ue(()=>{},["stop"]))},[B("img",{src:l.value.imgSrc,alt:"",onError:y[0]||(y[0]=h=>l.value.imgError=!0)},null,40,zn),B("div",Vn,[B("h6",null,F(l.value.application_name_zh),1),B("p",null,F(l.value.more),1)]),B("div",Rn,[B("h1",On,F(k.value.application_name_zh),1),B("span",Nn,F(k.value.version),1),B("div",Qn,[(j(!0),ee(We,null,Fe(k.value.tags,h=>(j(),ee("span",{key:h},F(h),1))),128))]),B("p",jn,F(k.value.more),1),se(kn,{split:"",ripple:!1,href:ie.value,color:"primary",label:"\u4E0B\u8F7D\uFF08DEB\uFF09","menu-anchor":"bottom middle","menu-self":"top middle",padding:"sm xl",onClick:y[1]||(y[1]=ue(()=>{},["stop"]))},{default:te(()=>[se(jt,null,{default:te(()=>[It((j(),Wt(Qt,{clickable:"",href:be.value},{default:te(()=>[se(Nt,null,{default:te(()=>[se(Ot,null,{default:te(()=>[Ft("BT\uFF08\u591A\u6E90\u4E0B\u8F7D\u66F4\u5FEB\uFF09")]),_:1})]),_:1})]),_:1},8,["href"])),[[Bn]])]),_:1})]),_:1},8,["href"])])],32),B("div",{class:"toolBox",onTransitionend:y[3]||(y[3]=ue(()=>{},["stop"]))},"\u67E5\u770B\u8BE6\u60C5",32)],32)],6),(j(!0),ee(We,null,Fe(s.value,(h,L)=>(j(),ee("div",{style:xe(h.style),class:_e(["card",h.class]),key:L,onMousedown:I=>W(h),onMouseup:I=>H(h)},[B("div",{class:"cardView",onTransitionend:I=>A(h,I)},[B("img",{src:h.imgSrc,alt:"",onError:I=>h.imgError=!0},null,40,Gn),B("div",Jn,[B("h6",null,F(h.application_name_zh),1),B("p",null,F(h.more),1)])],40,Un)],46,Kn))),128))],6))}};var aa=At(Yn,[["__scopeId","data-v-9f6c33fe"]]);export{aa as default};
